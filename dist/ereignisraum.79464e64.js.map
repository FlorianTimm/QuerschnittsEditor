{"version":3,"sources":["js/config.json","js/PublicWFS.ts","js/ereignisraum.ts"],"names":["module","exports","PUBLIC_WFS_URL","ER_WFS_URL","ABSCHNITT_WFS_URL","EPSG_CODE","DETAIL_HOCH","ERFASSUNG","EINZELSCHILD","BELEUCHTET","LAGEFB","GROESSE","STRASSENBEZUG","MPP"],"mappings":"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","file":"ereignisraum.79464e64.js","sourceRoot":"..\\src","sourcesContent":["module.exports={PUBLIC_WFS_URL:\"jsp/proxy.jsp\",ER_WFS_URL:\"jsp/proxy_er.jsp?wsdl\",ABSCHNITT_WFS_URL:\"jsp/abschnittWFS.jsp\",EPSG_CODE:\"EPSG:25832\",DETAIL_HOCH:\"#A03985F1986E1681E040480A20124127\",ERFASSUNG:\"#S8ac892a124b8e9f20124c3756edd03f7\",EINZELSCHILD:\"AF39068B2A284D9685D8C230848AABB0\",BELEUCHTET:\"8ac892a124b8e9f20124dd2e3635099d\",LAGEFB:\"8abeaa946341396401636de8ee162e8b\",GROESSE:\"E226D4EB52EF4A3C9229F40CD2EEB73E\",STRASSENBEZUG:\"A03985F204311681E040480A20124127\",MPP:0};","import Abschnitt from './Objekte/Abschnitt'\r\nvar CONFIG = require('./config.json');\r\n\r\n\r\n/**\r\n * Schnittstelle zum PublicWFS\r\n * @author Florian Timm, LGV HH \r\n * @version 2019.06.06\r\n * @copyright MIT\r\n */\r\nexport default class PublicWFS {\r\n\r\n    static doSoapRequest(\r\n        xml: string,\r\n        callbackSuccess: (xml: Document, ...args: any[]) => void,\r\n        callbackFailed: (xml: Document, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open('POST', CONFIG.PUBLIC_WFS_URL, true);\r\n\r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState != 4) return;\r\n            if (xmlhttp.status == 200) {\r\n                callbackSuccess(xmlhttp.responseXML, ...args)\r\n            } else {\r\n                if (callbackFailed != undefined)\r\n                    callbackFailed(xmlhttp.responseXML, ...args)\r\n                else\r\n                    PublicWFS.showMessage(\"Kommunikationsfehler\", true);\r\n            }\r\n        }\r\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml; charset=ISO-8859-1');\r\n        xmlhttp.send(xml);\r\n    }\r\n\r\n    static doGetRequest(\r\n        url_param: string,\r\n        callbackSuccess: (xml: Document, ...args: any[]) => void,\r\n        callbackFailed: (xml: Document, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open('GET', CONFIG.PUBLIC_WFS_URL + '?' + url_param, true);\r\n\r\n\r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState != 4) return;\r\n            if (xmlhttp.status == 200) {\r\n                callbackSuccess(xmlhttp.responseXML, ...args)\r\n            } else {\r\n                if (callbackFailed != undefined)\r\n                    callbackFailed(xmlhttp.responseXML, ...args)\r\n                else\r\n                    PublicWFS.showMessage(\"Kommunikationsfehler\", true);\r\n            }\r\n        }\r\n        xmlhttp.send();\r\n    }\r\n\r\n    static addInER(\r\n        abschnitt: Abschnitt,\r\n        objekt: string, ereignisraum_nr: string,\r\n        callbackSuccess: (xml: Document, ...args: any[]) => void,\r\n        callbackFailed: (xml: Document, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open('POST', CONFIG.ER_WFS_URL, true);\r\n\r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState != 4) return;\r\n            if (xmlhttp.status == 200) {\r\n                abschnitt.inER[objekt] = true;\r\n                if (callbackSuccess != undefined) {\r\n                    callbackSuccess(xmlhttp.responseXML, ...args)\r\n                } else {\r\n                    PublicWFS.showMessage(\"Objekt in ER kopiert\");\r\n                }\r\n            } else {\r\n                if (callbackFailed != undefined)\r\n                    callbackFailed(xmlhttp.responseXML, ...args)\r\n                else\r\n                    PublicWFS.showMessage(\"Objekt konnte nicht in ER kopiert werden\", true);\r\n            }\r\n        }\r\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\r\n        let xml = '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \\n' +\r\n            'xmlns:pub=\"http://ttsib.novasib.de/PublicServices\" xmlns:int=\"http://interfaceTypes.ttsib5.novasib.de/\">\\n' +\r\n            '<soapenv:Header/>\\n' +\r\n            '<soapenv:Body>\\n' +\r\n            '     <pub:expandProjektAbsObj>\\n' +\r\n            '            <projekt>\\n' +\r\n            '                   <int:ProjektNr>' + ereignisraum_nr + '</int:ProjektNr>\\n' +\r\n            '            </projekt>\\n' +\r\n            '            <abschnitte>\\n' +\r\n            '                   <int:vonKartenblatt>' + abschnitt.vtknr + '</int:vonKartenblatt>\\n' +\r\n            '                   <int:vonNkLfd>' + abschnitt.vnklfd + '</int:vonNkLfd>\\n' +\r\n            '                   <int:vonZusatz>' + abschnitt.vzusatz + '</int:vonZusatz>\\n' +\r\n            '                   <int:nachKartenblatt>' + abschnitt.ntknr + '</int:nachKartenblatt>\\n' +\r\n            '                   <int:nachNkLfd>' + abschnitt.nnklfd + '</int:nachNkLfd>\\n' +\r\n            '                   <int:nachZusatz>' + abschnitt.nzusatz + '</int:nachZusatz>\\n' +\r\n            '            </abschnitte>\\n' +\r\n            '            <objektKlassen>\\n' +\r\n            '                   <int:objektKlasse>' + objekt + '</int:objektKlasse>\\n' +\r\n            '            </objektKlassen>\\n' +\r\n            '     </pub:expandProjektAbsObj>\\n' +\r\n            '</soapenv:Body>\\n' +\r\n            '</soapenv:Envelope>'\r\n        xmlhttp.send(xml);\r\n    }\r\n\r\n    static addSekInER(objektPrim, objektTypePrim, objekt, ereignisraum_nr, callbackSuccess, callbackFailed, ...args) {\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open('POST', CONFIG.ER_WFS_URL, true);\r\n\r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState != 4) return;\r\n            if (xmlhttp.status == 200) {\r\n                objektPrim.inER[objekt] = true;\r\n                if (callbackSuccess != undefined) {\r\n                    callbackSuccess(xmlhttp.responseXML, ...args)\r\n                } else {\r\n                    PublicWFS.showMessage(\"Objekt in ER kopiert\");\r\n                }\r\n            } else {\r\n                if (callbackFailed != undefined)\r\n                    callbackFailed(xmlhttp.responseXML, ...args)\r\n                else\r\n                    PublicWFS.showMessage(\"Objekt konnte nicht in ER kopiert werden\", true);\r\n            }\r\n        }\r\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\r\n        let xml = '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \\n' +\r\n            'xmlns:pub=\"http://ttsib.novasib.de/PublicServices\" xmlns:int=\"http://interfaceTypes.ttsib5.novasib.de/\">\\n' +\r\n            '<soapenv:Header/>\\n' +\r\n            '<soapenv:Body>\\n' +\r\n            '     <pub:expandProjektPrimObj>\\n' +\r\n            '            <projekt>\\n' +\r\n            '                   <int:ProjektNr>' + ereignisraum_nr + '</int:ProjektNr>\\n' +\r\n            '            </projekt>\\n' +\r\n            '            <primObjekte>\\n' +\r\n            '                   <int:objektId>' + objektPrim.objektId + '</int:objektId>\\n' +\r\n            '                   <int:objektKlasse>' + objektTypePrim + '</int:objektKlasse>\\n' +\r\n            '            </primObjekte>\\n' +\r\n            '            <objektKlassen>\\n' +\r\n            '                   <int:objektKlasse>' + objekt + '</int:objektKlasse>\\n' +\r\n            '            </objektKlassen>\\n' +\r\n            '     </pub:expandProjektPrimObj>\\n' +\r\n            '</soapenv:Body>\\n' +\r\n            '</soapenv:Envelope>'\r\n        xmlhttp.send(xml);\r\n    }\r\n\r\n    static doTransaction(transaction: string,\r\n        callbackSuccess?: (xml: Document, ...args: any[]) => void,\r\n        callbackFailed?: (xml: Document, ...args: any[]) => void, ...args: any[]) {\r\n\r\n        var xml =\r\n            '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\r\n            '<wfs:Transaction service=\"WFS\" version=\"1.0.0\"' +\r\n            '\t\txmlns=\"http://xml.novasib.de\"' +\r\n            '\t\txmlns:wfs=\"http://www.opengis.net/wfs\" ' +\r\n            '\t\txmlns:gml=\"http://www.opengis.net/gml\" ' +\r\n            '\t\txmlns:ogc=\"http://www.opengis.net/ogc\" ' +\r\n            '\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\r\n            '\t\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\r\n            '\t\txsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\r\n            transaction +\r\n            '</wfs:Transaction>';\r\n        return PublicWFS.doSoapRequest(xml, this._checkTransacktionSuccess, this._checkTransacktionFailed,\r\n            callbackSuccess, callbackFailed, ...args)\r\n    }\r\n\r\n    static _checkTransacktionSuccess(xml: Document,\r\n        callbackSuccess?: (xml: XMLDocument, ...args: any[]) => void,\r\n        callbackFailed?: (xml: XMLDocument, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        if (xml.getElementsByTagName('SUCCESS').length > 0) {\r\n            if (callbackSuccess != undefined)\r\n                callbackSuccess(xml, ...args);\r\n            else\r\n                PublicWFS.showMessage(\"Erfolgreich\");\r\n        } else {\r\n            if (callbackFailed != undefined)\r\n                callbackFailed(xml, ...args);\r\n            else\r\n                PublicWFS.showMessage(\"Konnte nicht gespeichert werden\", true);\r\n        }\r\n    }\r\n\r\n    static _checkTransacktionFailed(xml: XMLDocument,\r\n        callbackSuccess?: (xml: XMLDocument, ...args: any[]) => void,\r\n        callbackFailed?: (xml: XMLDocument, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        callbackFailed(xml, ...args);\r\n    }\r\n\r\n    static doQuery(klasse: string, filter: string,\r\n        callbackSuccess?: (xml: XMLDocument, ...args: any[]) => void,\r\n        callbackFailed?: (xml: XMLDocument, ...args: any[]) => void,\r\n        ...args: any[]) {\r\n\r\n        /*var xml = '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\r\n            '<wfs:GetFeature xmlns=\"http://xml.novasib.de\" ' +\r\n            'xmlns:wfs=\"http://www.opengis.net/wfs\" ' +\r\n            'xmlns:gml=\"http://www.opengis.net/gml\" ' +\r\n            'xmlns:ogc=\"http://www.opengis.net/ogc\" ' +\r\n            'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\r\n            'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" service=\"WFS\" version=\"1.0.0\" ' +\r\n            'xsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\r\n            '<wfs:Query typeName=\"' + klasse + '\"><MPP>0</MPP>' +\r\n            filter +\r\n            '</wfs:Query>' +\r\n            '</wfs:GetFeature>';\r\n        return PublicWFS.doSoapRequest(xml, callbackSuccess, callbackFailed, ...args);*/\r\n\r\n        let url_param = \"Request=GetFeature&TYPENAME=\" + klasse + \"&MPP=0&filter=\" + encodeURIComponent(filter);\r\n        return PublicWFS.doGetRequest(url_param, callbackSuccess, callbackFailed, ...args);\r\n\r\n\r\n    }\r\n\r\n    static showMessage(text: string, error: boolean = false) {\r\n        let m = document.createElement('div');\r\n        m.className = 'nachricht';\r\n        m.innerHTML = text;\r\n        document.body.appendChild(m);\r\n\r\n        let ausblenden = function () {\r\n            m.style.display = 'none';\r\n            document.body.removeChild(m);\r\n        }\r\n\r\n        if (error) {\r\n            m.style.backgroundColor = 'rgba(255,100,100,0.8)';\r\n            window.setTimeout(ausblenden, 3000);\r\n        } else {\r\n            m.style.backgroundColor = 'rgba(100, 200,100,0.8)';\r\n            window.setTimeout(ausblenden, 5000);\r\n        }\r\n        m.style.display = 'block';\r\n    }\r\n}","/**\r\n * Startscript ereignisraum.html\r\n * @author Florian Timm, LGV HH \r\n * @version 2019.06.06\r\n * @copyright MIT\r\n */\r\n\r\nimport PublicWFS from './PublicWFS';\r\n\r\nwindow.addEventListener('load', loadER);\r\n\r\nvar er = []\r\nvar select: HTMLSelectElement = document.getElementById(\"er_select\") as HTMLSelectElement;\r\nselect.addEventListener(\"change\", aenderung);\r\n\r\n//?Service=WFS&Request=GetFeature&TypeName=Projekt&Filter=<Filter><PropertyIsEqualTo><PropertyName>status</PropertyName><Literal>1</Literal></PropertyIsEqualTo></Filter>\r\n\r\nfunction loadER() {\r\n    PublicWFS.doQuery('Projekt',\r\n        '<Filter><And>' +\r\n        '<PropertyIsEqualTo><PropertyName>status</PropertyName>' +\r\n        '<Literal>1</Literal>' +\r\n        '</PropertyIsEqualTo><PropertyIsEqualTo>' +\r\n        '<PropertyName>typ</PropertyName>' +\r\n        '<Literal>D</Literal>' +\r\n        '</PropertyIsEqualTo>' +\r\n        '</And></Filter>', readER);\r\n}\r\n\r\nfunction readER(xml: Document) {\r\n    let proj = xml.getElementsByTagName(\"Projekt\")\r\n    select.innerHTML = \"\"\r\n\r\n    for (var i = 0; i < proj.length; i++) {\r\n        let projekt: {\r\n            fid: string,\r\n            nr: number,\r\n            kurzbez: string,\r\n            langbez: string,\r\n            ownerName: string,\r\n            anlagedat: string\r\n        } = {\r\n            fid: null,\r\n            nr: null,\r\n            kurzbez: \"\",\r\n            langbez: \"\",\r\n            ownerName: \"\",\r\n            anlagedat: null\r\n        };\r\n\r\n        projekt.fid = proj[i].getAttribute(\"fid\")\r\n        projekt.nr = parseInt(proj[i].getElementsByTagName(\"projekt\")[0].firstChild.textContent);\r\n        let kurzbez = proj[i].getElementsByTagName(\"kurzbez\")\r\n        if (kurzbez.length > 0)\r\n            projekt.kurzbez = proj[i].getElementsByTagName(\"kurzbez\")[0].firstChild.textContent\r\n        else\r\n            projekt.kurzbez = \"\"\r\n        let langbez = proj[i].getElementsByTagName(\"langbez\")\r\n        if (langbez.length > 0)\r\n            projekt.langbez = proj[i].getElementsByTagName(\"langbez\")[0].firstChild.textContent\r\n        else\r\n            projekt.langbez = \"\"\r\n        projekt.ownerName = proj[i].getElementsByTagName(\"ownerName\")[0].firstChild.textContent\r\n        projekt.anlagedat = proj[i].getElementsByTagName(\"anlagedat\")[0].firstChild.textContent\r\n\r\n        er.push(projekt);\r\n    }\r\n\r\n    console.log(er);\r\n    er.sort(function (a, b) {\r\n        return Number(a.nr) - Number(b.nr);\r\n    });\r\n    console.log(er);\r\n\r\n    for (let projekt of er) {\r\n        let o = document.createElement('option')\r\n        let v = document.createAttribute(\"value\")\r\n        v.value = projekt.fid\r\n        o.setAttributeNode(v);\r\n        let t = document.createTextNode(String(projekt.nr).substr(11) + \" - \" + projekt.kurzbez);\r\n        o.appendChild(t)\r\n        select.appendChild(o)\r\n    }\r\n    //document.getElementById(\"platzhalter\").remove();\r\n    if (proj.length > 0) {\r\n        aenderung();\r\n        select.disabled = false;\r\n        (document.getElementById(\"submit\") as HTMLInputElement).disabled = false;\r\n    } else {\r\n        select.innerHTML = '<option id=\"platzhalter\">Keine Ereignisr&auml;ume vorhanden!</option>'\r\n    }\r\n}\r\n\r\nfunction aenderung() {\r\n    for (let projekt of er) {\r\n        if (projekt.fid != select.value) continue;\r\n        (document.getElementById(\"ernr\") as HTMLInputElement).value = projekt.nr;\r\n        document.getElementById(\"nummer\").innerHTML = projekt.nr;\r\n        document.getElementById(\"kurzbez\").innerHTML = projekt.kurzbez;\r\n        document.getElementById(\"langbez\").innerHTML = projekt.langbez;\r\n        document.getElementById(\"bearbeiter\").innerHTML = projekt.ownerName;\r\n        document.getElementById(\"datum\").innerHTML = projekt.anlagedat;\r\n        break;\r\n    }\r\n}"]}