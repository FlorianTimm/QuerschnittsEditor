{"version":3,"sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","0","js/PublicWFS.js","js/ereignisraum.js"],"names":["module","exports","PUBLIC_WFS_URL","ER_WFS_URL","ABSCHNITT_WFS_URL","EPSG_CODE","DETAIL_HOCH","ERFASSUNG","MPP","CONFIG","require","PublicWFS","xml","callbackSuccess","callbackFailed","args","xmlhttp","XMLHttpRequest","open","onreadystatechange","readyState","status","responseXML","undefined","showMessage","setRequestHeader","send","url_param","abschnitt","objekt","ereignisraum_nr","inER","vtknr","vnklfd","vzusatz","ntknr","nnklfd","nzusatz","objektPrim","objektTypePrim","objektId","transaction","doSoapRequest","_checkTransacktionSuccess","_checkTransacktionFailed","getElementsByTagName","length","klasse","filter","encodeURIComponent","doGetRequest","text","error","m","document","createElement","className","innerHTML","body","appendChild","ausblenden","style","display","removeChild","backgroundColor","window","setTimeout","addEventListener","loadER","er","select","getElementById","doQuery","readER","proj","i","projekt","getAttribute","nr","firstChild","data","kurzbez","langbez","ownerName","anlagedat","pid","o","v","createAttribute","value","setAttributeNode","t","createTextNode","substr","aenderung","disabled","p"],"mappings":"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","file":"ereignisraum.52a5ee1e.map","sourceRoot":"../src","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;",null,"var CONFIG = require('./config.json');\n\nclass PublicWFS {\n\n    static doSoapRequest(xml, callbackSuccess, callbackFailed, ...args) {\n        var xmlhttp = new XMLHttpRequest();\n        xmlhttp.open('POST', CONFIG.PUBLIC_WFS_URL, true);\n\n\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState != 4) return;\n            if (xmlhttp.status == 200) {\n                callbackSuccess(xmlhttp.responseXML, ...args)\n            } else {\n                if (callbackFailed != undefined)\n                    callbackFailed(xmlhttp.responseXML, ...args)\n                else\n                    PublicWFS.showMessage(\"Kommunikationsfehler\", true);\n            }\n        }\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n        xmlhttp.send(xml);\n    }\n\n    static doGetRequest(url_param, callbackSuccess, callbackFailed, ...args) {\n        var xmlhttp = new XMLHttpRequest();\n        xmlhttp.open('GET', CONFIG.PUBLIC_WFS_URL + '?' + url_param, true);\n\n\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState != 4) return;\n            if (xmlhttp.status == 200) {\n                callbackSuccess(xmlhttp.responseXML, ...args)\n            } else {\n                if (callbackFailed != undefined)\n                    callbackFailed(xmlhttp.responseXML, ...args)\n                else\n                    PublicWFS.showMessage(\"Kommunikationsfehler\", true);\n            }\n        }\n        xmlhttp.send();\n    }\n\n    static addInER(abschnitt, objekt, ereignisraum_nr, callbackSuccess, callbackFailed, ...args) {\n        var xmlhttp = new XMLHttpRequest();\n        xmlhttp.open('POST', CONFIG.ER_WFS_URL, true);\n\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState != 4) return;\n            if (xmlhttp.status == 200) {\n                abschnitt.inER[objekt] = true;\n                if (callbackSuccess != undefined) {\n                    callbackSuccess(xmlhttp.responseXML, ...args)\n                } else {\n                    PublicWFS.showMessage(\"Objekt in ER kopiert\");\n                }\n            } else {\n                if (callbackFailed != undefined)\n                    callbackFailed(xmlhttp.responseXML, ...args)\n                else\n                    PublicWFS.showMessage(\"Objekt konnte nicht in ER kopiert werden\", true);\n            }\n        }\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n        let xml = '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \\n' +\n            'xmlns:pub=\"http://ttsib.novasib.de/PublicServices\" xmlns:int=\"http://interfaceTypes.ttsib5.novasib.de/\">\\n' +\n            '<soapenv:Header/>\\n' +\n            '<soapenv:Body>\\n' +\n            '     <pub:expandProjektAbsObj>\\n' +\n            '            <projekt>\\n' +\n            '                   <int:ProjektNr>' + ereignisraum_nr + '</int:ProjektNr>\\n' +\n            '            </projekt>\\n' +\n            '            <abschnitte>\\n' +\n            '                   <int:vonKartenblatt>' + abschnitt.vtknr + '</int:vonKartenblatt>\\n' +\n            '                   <int:vonNkLfd>' + abschnitt.vnklfd + '</int:vonNkLfd>\\n' +\n            '                   <int:vonZusatz>' + abschnitt.vzusatz + '</int:vonZusatz>\\n' +\n            '                   <int:nachKartenblatt>' + abschnitt.ntknr + '</int:nachKartenblatt>\\n' +\n            '                   <int:nachNkLfd>' + abschnitt.nnklfd + '</int:nachNkLfd>\\n' +\n            '                   <int:nachZusatz>' + abschnitt.nzusatz + '</int:nachZusatz>\\n' +\n            '            </abschnitte>\\n' +\n            '            <objektKlassen>\\n' +\n            '                   <int:objektKlasse>' + objekt + '</int:objektKlasse>\\n' +\n            '            </objektKlassen>\\n' +\n            '     </pub:expandProjektAbsObj>\\n' +\n            '</soapenv:Body>\\n' +\n            '</soapenv:Envelope>'\n        xmlhttp.send(xml);\n    }\n\n    static addSekInER(objektPrim, objektTypePrim, objekt, ereignisraum_nr, callbackSuccess, callbackFailed, ...args) {\n        var xmlhttp = new XMLHttpRequest();\n        xmlhttp.open('POST', CONFIG.ER_WFS_URL, true);\n\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState != 4) return;\n            if (xmlhttp.status == 200) {\n                objektPrim.inER[objekt] = true;\n                if (callbackSuccess != undefined) {\n                    callbackSuccess(xmlhttp.responseXML, ...args)\n                } else {\n                    PublicWFS.showMessage(\"Objekt in ER kopiert\");\n                }\n            } else {\n                if (callbackFailed != undefined)\n                    callbackFailed(xmlhttp.responseXML, ...args)\n                else\n                    PublicWFS.showMessage(\"Objekt konnte nicht in ER kopiert werden\", true);\n            }\n        }\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n        let xml = '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \\n' +\n            'xmlns:pub=\"http://ttsib.novasib.de/PublicServices\" xmlns:int=\"http://interfaceTypes.ttsib5.novasib.de/\">\\n' +\n            '<soapenv:Header/>\\n' +\n            '<soapenv:Body>\\n' +\n            '     <pub:expandProjektPrimObj>\\n' +\n            '            <projekt>\\n' +\n            '                   <int:ProjektNr>' + ereignisraum_nr + '</int:ProjektNr>\\n' +\n            '            </projekt>\\n' +\n            '            <primObjekte>\\n' +\n            '                   <int:objektId>' + objektPrim.objektId + '</int:objektId>\\n' +\n            '                   <int:objektKlasse>' + objektTypePrim + '</int:objektKlasse>\\n' +\n            '            </primObjekte>\\n' +\n            '            <objektKlassen>\\n' +\n            '                   <int:objektKlasse>' + objekt + '</int:objektKlasse>\\n' +\n            '            </objektKlassen>\\n' +\n            '     </pub:expandProjektPrimObj>\\n' +\n            '</soapenv:Body>\\n' +\n            '</soapenv:Envelope>'\n        xmlhttp.send(xml);\n    }\n\n    static doTransaction(transaction, callbackSuccess, callbackFailed, ...args) {\n        var xml =\n            '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\n            '<wfs:Transaction service=\"WFS\" version=\"1.0.0\"' +\n            '\t\txmlns=\"http://xml.novasib.de\"' +\n            '\t\txmlns:wfs=\"http://www.opengis.net/wfs\" ' +\n            '\t\txmlns:gml=\"http://www.opengis.net/gml\" ' +\n            '\t\txmlns:ogc=\"http://www.opengis.net/ogc\" ' +\n            '\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n            '\t\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\n            '\t\txsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\n            transaction +\n            '</wfs:Transaction>';\n        return PublicWFS.doSoapRequest(xml, this._checkTransacktionSuccess, this._checkTransacktionFailed,\n            callbackSuccess, callbackFailed, ...args)\n    }\n\n    static _checkTransacktionSuccess(xml, callbackSuccess, callbackFailed, ...args) {\n        if (xml.getElementsByTagName('SUCCESS').length > 0) {\n            if (callbackSuccess != undefined)\n                callbackSuccess(xml, ...args);\n            else\n                PublicWFS.showMessage(\"Erfolgreich\");\n        } else {\n            if (callbackFailed != undefined)\n                callbackFailed(xml, ...args);\n            else\n                PublicWFS.showMessage(\"Konnte nicht gespeichert werden\", true);\n        }\n    }\n\n    static _checkTransacktionFailed(xml, callbackSuccess, callbackFailed, ...args) {\n        callbackFailed(xml, ...args);\n    }\n\n    static doQuery(klasse, filter, callbackSuccess, callbackFailed, ...args) {\n        /*var xml = '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\n            '<wfs:GetFeature xmlns=\"http://xml.novasib.de\" ' +\n            'xmlns:wfs=\"http://www.opengis.net/wfs\" ' +\n            'xmlns:gml=\"http://www.opengis.net/gml\" ' +\n            'xmlns:ogc=\"http://www.opengis.net/ogc\" ' +\n            'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n            'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" service=\"WFS\" version=\"1.0.0\" ' +\n            'xsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\n            '<wfs:Query typeName=\"' + klasse + '\"><MPP>0</MPP>' +\n            filter +\n            '</wfs:Query>' +\n            '</wfs:GetFeature>';\n        return PublicWFS.doSoapRequest(xml, callbackSuccess, callbackFailed, ...args);*/\n\n        let url_param = \"Request=GetFeature&TYPENAME=\" + klasse + \"&MPP=0&filter=\" + encodeURIComponent(filter);\n        return PublicWFS.doGetRequest(url_param, callbackSuccess, callbackFailed, ...args);\n\n\n    }\n\n    static showMessage(text, error) {\n        let m = document.createElement('div');\n        m.className = 'nachricht';\n        m.innerHTML = text;\n        document.body.appendChild(m);\n\n        let ausblenden = function () {\n            m.style.display = 'none';\n            document.body.removeChild(m);\n        }\n\n        if (error) {\n            m.style.backgroundColor = 'rgba(255,100,100,0.8)';\n            window.setTimeout(ausblenden, 3000);\n        } else {\n            m.style.backgroundColor = 'rgba(100, 200,100,0.8)';\n            window.setTimeout(ausblenden, 5000);\n        }\n        m.style.display = 'block';\n    }\n}\n\nmodule.exports = PublicWFS;","import '../css/index.css';\nimport PublicWFS from './PublicWFS.js';\n\nwindow.addEventListener('load', loadER());\n\nvar er = {}\nvar select = document.getElementById(\"er_select\")\nselect.addEventListener(\"change\", aenderung);\n\n//?Service=WFS&Request=GetFeature&TypeName=Projekt&Filter=<Filter><PropertyIsEqualTo><PropertyName>status</PropertyName><Literal>1</Literal></PropertyIsEqualTo></Filter>\n\nfunction loadER() {\n    let xml = PublicWFS.doQuery('Projekt',\n        '<Filter><And>' +\n        '<PropertyIsEqualTo><PropertyName>status</PropertyName>' +\n        '<Literal>1</Literal>' +\n        '</PropertyIsEqualTo><PropertyIsEqualTo>' +\n        '<PropertyName>typ</PropertyName>' +\n        '<Literal>D</Literal>' +\n        '</PropertyIsEqualTo>' +\n        '</And></Filter>', readER);\n}\n\nfunction readER(xml) {\n    let proj = xml.getElementsByTagName(\"Projekt\")\n    select.innerHTML = \"\"\n\n    for (var i = 0; i < proj.length; i++) {\n\n        let projekt = proj[i].getAttribute(\"fid\")\n\n        er[projekt] = {}\n\n        er[projekt].nr = proj[i].getElementsByTagName(\"projekt\")[0].firstChild.data\n        let kurzbez = proj[i].getElementsByTagName(\"kurzbez\")\n        if (kurzbez.length > 0)\n            er[projekt].kurzbez = proj[i].getElementsByTagName(\"kurzbez\")[0].firstChild.data\n        else\n            er[projekt].kurzbez = \"\"\n        let langbez = proj[i].getElementsByTagName(\"langbez\")\n        if (langbez.length > 0)\n            er[projekt].langbez = proj[i].getElementsByTagName(\"langbez\")[0].firstChild.data\n        else\n            er[projekt].langbez = \"\"\n        er[projekt].ownerName = proj[i].getElementsByTagName(\"ownerName\")[0].firstChild.data\n        er[projekt].anlagedat = proj[i].getElementsByTagName(\"anlagedat\")[0].firstChild.data\n    }\n\n    /*console.log(er);\n    er.sort(function (a, b) {\n        return Number(a.nr) - Number(b.nr);\n    });\n    console.log(er);*/\n\n    for (let pid in er) {\n        let o = document.createElement('option')\n        let v = document.createAttribute(\"value\")\n        v.value = pid\n        o.setAttributeNode(v);\n        let t = document.createTextNode(er[pid]['nr'].substr(11) + \" - \" + er[pid]['kurzbez']);\n        o.appendChild(t)\n        select.appendChild(o)\n    }\n    //document.getElementById(\"platzhalter\").remove();\n    if (proj.length > 0) {\n        aenderung();\n        select.disabled = false;\n        document.getElementById(\"submit\").disabled = false;\n    } else {\n        select.innerHTML  = '<option id=\"platzhalter\">Keine Ereignisr&auml;ume vorhanden!</option>'\n    }\n}\n\nfunction aenderung() {\n    var p = er[select.value]\n    document.getElementById(\"ernr\").value = p['nr']\n    document.getElementById(\"nummer\").innerHTML = p['nr']\n    document.getElementById(\"kurzbez\").innerHTML = p['kurzbez']\n    document.getElementById(\"langbez\").innerHTML = p['langbez']\n    document.getElementById(\"bearbeiter\").innerHTML = p['ownerName']\n    document.getElementById(\"datum\").innerHTML = p['anlagedat']\n}"]}