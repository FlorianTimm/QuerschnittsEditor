{"version":3,"sources":["0","js/PublicWFS.js","js/index.js"],"names":["module","exports","PUBLIC_WFS_URL","ER_WFS_URL","EPSG_CODE","AUFBAUDATEN","projekt","art","kt","parent","abschnittOderAst","vst","bst","teilnr","teilbreite","decksch","baujahr","dicke","baumonat","korngr","unscharf","kennz","art1","art2","art3","artneu","material1","material2","material3","bindemit1","bindemit2","detaila","detailb","detailc","detaild","umweltr","kherk","baujahrGew","abnahmeGew","dauerGew","ablaufGew","objektId","objektnr","erfart","quelle","ADatum","bemerkung","bearbeiter","behoerde","QUERSCHNITT","abschnittId","streifen","streifennr","artober","breite","bisBreite","blpart","blpart3","uipart","uipart3","XVstL","XVstR","XBstL","XBstR","CONFIG","require","PublicWFS","xml","callbackSuccess","callbackFailed","args","xmlhttp","XMLHttpRequest","open","onreadystatechange","readyState","status","responseXML","undefined","showMessage","setRequestHeader","send","transaction","doSoapRequest","_checkTransacktionSuccess","_checkTransacktionFailed","getElementsByTagName","length","klasse","filter","text","error","m","document","createElement","className","innerHTML","body","append","ausblenden","style","display","remove","backgroundColor","window","setTimeout","addEventListener","loadER","er","select","getElementById","doQuery","readER","console","log","proj","i","getAttribute","firstChild","data","pid","o","v","createAttribute","value","setAttributeNode","t","createTextNode","substr","appendChild","disabled","aenderung","p"],"mappings":";;;AAAAA,OAAOC,QAAU,CACfC,eAAgB,YAChBC,WAAY,eACZC,UAAW,aACXC,YAAa,CACXC,QAAS,CACPC,IAAK,EACLC,GAAI,WAENC,OAAQ,CACNF,IAAK,EACLC,GAAI,WAENE,iBAAkB,CAChBH,IAAK,EACLC,GAAI,aAENG,IAAK,CACHJ,IAAK,GAEPK,IAAK,CACHL,IAAK,GAEPM,OAAQ,CACNN,IAAK,GAEPO,WAAY,CACVP,IAAK,GAEPQ,QAAS,CACPR,IAAK,GAEPS,QAAS,CACPT,IAAK,GAEPU,MAAO,CACLV,IAAK,GAEPW,SAAU,CACRX,IAAK,GAEPY,OAAQ,CACNZ,IAAK,GAEPa,SAAU,CACRb,IAAK,GAEPc,MAAO,CACLd,IAAK,EACLC,GAAI,kBAENc,KAAM,CACJf,IAAK,EACLC,GAAI,eAENe,KAAM,CACJhB,IAAK,EACLC,GAAI,eAENgB,KAAM,CACJjB,IAAK,EACLC,GAAI,eAENiB,OAAQ,CACNlB,IAAK,EACLC,GAAI,gBAENkB,UAAW,CACTnB,IAAK,EACLC,GAAI,cAENmB,UAAW,CACTpB,IAAK,EACLC,GAAI,cAENoB,UAAW,CACTrB,IAAK,EACLC,GAAI,cAENqB,UAAW,CACTtB,IAAK,EACLC,GAAI,eAENsB,UAAW,CACTvB,IAAK,EACLC,GAAI,eAENuB,QAAS,CACPxB,IAAK,EACLC,GAAI,cAENwB,QAAS,CACPzB,IAAK,EACLC,GAAI,cAENyB,QAAS,CACP1B,IAAK,EACLC,GAAI,cAEN0B,QAAS,CACP3B,IAAK,EACLC,GAAI,cAEN2B,QAAS,CACP5B,IAAK,GAEP6B,MAAO,CACL7B,IAAK,EACLC,GAAI,eAEN6B,WAAY,CACV9B,IAAK,GAEP+B,WAAY,CACV/B,IAAK,GAEPgC,SAAU,CACRhC,IAAK,GAEPiC,UAAW,CACTjC,IAAK,GAEPkC,SAAU,CACRlC,IAAK,GAEPmC,SAAU,CACRnC,IAAK,GAEPoC,OAAQ,CACNpC,IAAK,EACLC,GAAI,YAENoC,OAAQ,CACNrC,IAAK,EACLC,GAAI,YAENqC,OAAQ,CACNtC,IAAK,GAEPuC,UAAW,CACTvC,IAAK,GAEPwC,WAAY,CACVxC,IAAK,GAEPyC,SAAU,CACRzC,IAAK,IAGT0C,YAAa,CACX3C,QAAS,CACPC,IAAK,EACLC,GAAI,WAEN0C,YAAa,CACX3C,IAAK,GAEPI,IAAK,CACHJ,IAAK,GAEPK,IAAK,CACHL,IAAK,GAEP4C,SAAU,CACR5C,IAAK,GAEP6C,WAAY,CACV7C,IAAK,GAEPA,IAAK,CACHA,IAAK,GAEP8C,QAAS,CACP9C,IAAK,EACLC,GAAI,aAEN8C,OAAQ,CACN/C,IAAK,GAEPgD,UAAW,CACThD,IAAK,GAEPiD,OAAQ,CACNjD,IAAK,EACLC,GAAI,cAENiD,QAAS,CACPlD,IAAK,EACLC,GAAI,eAENkD,OAAQ,CACNnD,IAAK,EACLC,GAAI,cAENmD,QAAS,CACPpD,IAAK,EACLC,GAAI,eAENoD,MAAO,CACLrD,IAAK,GAEPsD,MAAO,CACLtD,IAAK,GAEPuD,MAAO,CACLvD,IAAK,GAEPwD,MAAO,CACLxD,IAAK,GAEP6B,MAAO,CACL7B,IAAK,EACLC,GAAI,eAEN6B,WAAY,CACV9B,IAAK,GAEP+B,WAAY,CACV/B,IAAK,GAEPgC,SAAU,CACRhC,IAAK,GAEPiC,UAAW,CACTjC,IAAK,GAEPkC,SAAU,CACRlC,IAAK,GAEPmC,SAAU,CACRnC,IAAK,GAEPoC,OAAQ,CACNpC,IAAK,EACLC,GAAI,YAENoC,OAAQ,CACNrC,IAAK,EACLC,GAAI,YAENqC,OAAQ,CACNtC,IAAK,GAEPuC,UAAW,CACTvC,IAAK,GAEPwC,WAAY,CACVxC,IAAK,GAEPyC,SAAU,CACRzC,IAAK;;ACzJX,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAjGA,IAAIyD,EAASC,QAAQ,iBAEfC,EA+FN,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,gBA7FyBC,MAAAA,SAAAA,EAAKC,EAAiBC,GAAmBC,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAM,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAANA,EAAM,EAAA,GAAA,UAAA,GAC5DC,IAAAA,EAAU,IAAIC,eAClBD,EAAQE,KAAK,OAAQT,EAAO9D,gBAAgB,GAG5CqE,EAAQG,mBAAqB,WACC,GAAtBH,EAAQI,aACU,KAAlBJ,EAAQK,OACRR,EAAA,WAAgBG,EAAAA,CAAAA,EAAQM,aAAgBP,OAAAA,IAElBQ,MAAlBT,EACAA,EAAA,WAAeE,EAAAA,CAAAA,EAAQM,aAAgBP,OAAAA,IAEvCJ,EAAUa,YAAY,wBAAwB,KAG1DR,EAAQS,iBAAiB,eAAgB,YACzCT,EAAQU,KAAKd,KA4ErB,CAAA,IAAA,gBAzEyBe,MAAAA,SAAAA,EAAad,EAAiBC,GAAmBC,IAC9DH,IAAAA,EACA,odASAe,EACA,qBAZ8DZ,EAAAA,UAAAA,OAAAA,EAAM,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAANA,EAAM,EAAA,GAAA,UAAA,GAajEJ,OAAAA,EAAUiB,cAAVjB,MAAAA,EAAwBC,CAAAA,EAAK,KAAKiB,0BAA2B,KAAKC,yBACrEjB,EAAiBC,GAAmBC,OAAAA,MA2DhD,CAAA,IAAA,4BAxDsCH,MAAAA,SAAAA,EAAKC,EAAiBC,GAAmBC,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAM,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAANA,EAAM,EAAA,GAAA,UAAA,GACzEH,EAAImB,qBAAqB,WAAWC,OAAS,EACtBT,MAAnBV,EACAA,EAAA,WAAgBD,EAAAA,CAAAA,GAAQG,OAAAA,IAExBJ,EAAUa,YAAY,eAEJD,MAAlBT,EACAA,EAAA,WAAeF,EAAAA,CAAAA,GAAQG,OAAAA,IAEvBJ,EAAUa,YAAY,mCAAmC,KA8CzE,CAAA,IAAA,2BA1CqCZ,MAAAA,SAAAA,EAAKC,EAAiBC,GAAmBC,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAM,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAANA,EAAM,EAAA,GAAA,UAAA,GAC5ED,EAAA,WAAeF,EAAAA,CAAAA,GAAQG,OAAAA,MAyC/B,CAAA,IAAA,UAtCmBkB,MAAAA,SAAAA,EAAQC,EAAQrB,EAAiBC,GAAmBC,IAC3DH,IAAAA,EAAM,8cAQoBqB,EAAS,KACnCC,EACA,gCAX2DnB,EAAAA,UAAAA,OAAAA,EAAM,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAANA,EAAM,EAAA,GAAA,UAAA,GAa9DJ,OAAAA,EAAUiB,cAAVjB,MAAAA,EAAwBC,CAAAA,EAAKC,EAAiBC,GAAmBC,OAAAA,MAyBhF,CAAA,IAAA,cAtBuBoB,MAAAA,SAAAA,EAAMC,GACjBC,IAAAA,EAAIC,SAASC,cAAc,OAC/BF,EAAEG,UAAY,YACdH,EAAEI,UAAYN,EACdG,SAASI,KAAKC,OAAON,GAEjBO,IAAAA,EAAa,WACbP,EAAEQ,MAAMC,QAAU,OAClBT,EAAEU,UAGFX,GACAC,EAAEQ,MAAMG,gBAAkB,wBAC1BC,OAAOC,WAAWN,EAAY,OAE9BP,EAAEQ,MAAMG,gBAAkB,yBAC1BC,OAAOC,WAAWN,EAAY,MAElCP,EAAEQ,MAAMC,QAAU,YAI1B,EAAA,GAAArG,OAAOC,QAAUiE;;AC1BhB,aAvED,QAAA,oBACA,IAAA,EAAA,EAAA,QAAA,mBAsEC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GApEDsC,OAAOE,iBAAiB,OAAQC,KAEhC,IAAIC,EAAK,GACLC,EAAShB,SAASiB,eAAe,aAKrC,SAASH,IACKzC,EAAU6C,QAAAA,QAAQ,UACxB,wNAOoBC,GAG5B,SAASA,EAAO7C,GACZ8C,QAAQC,IAAI/C,GACRgD,IAAAA,EAAOhD,EAAImB,qBAAqB,WACpCuB,EAAOb,UAAY,GAEd,IAAA,IAAIoB,EAAI,EAAGA,EAAID,EAAK5B,OAAQ6B,IAAK,CAE9B9G,IAAAA,EAAU6G,EAAKC,GAAGC,aAAa,OAEnCT,EAAGtG,GAAW,GAEdsG,EAAGtG,GAAH,GAAoB6G,EAAKC,GAAG9B,qBAAqB,WAAW,GAAGgC,WAAWC,KAC5DJ,EAAKC,GAAG9B,qBAAqB,WAC/BC,OAAS,EACjBqB,EAAGtG,GAAH,QAAyB6G,EAAKC,GAAG9B,qBAAqB,WAAW,GAAGgC,WAAWC,KAE/EX,EAAGtG,GAAH,QAAyB,GACf6G,EAAKC,GAAG9B,qBAAqB,WAC/BC,OAAS,EACjBqB,EAAGtG,GAAH,QAAyB6G,EAAKC,GAAG9B,qBAAqB,WAAW,GAAGgC,WAAWC,KAE/EX,EAAGtG,GAAH,QAAyB,GAC7BsG,EAAGtG,GAAH,UAA2B6G,EAAKC,GAAG9B,qBAAqB,aAAa,GAAGgC,WAAWC,KACnFX,EAAGtG,GAAH,UAA2B6G,EAAKC,GAAG9B,qBAAqB,aAAa,GAAGgC,WAAWC,KAIlF,IAAA,IAAIC,KAAOZ,EAAI,CACZa,IAAAA,EAAI5B,SAASC,cAAc,UAC3B4B,EAAI7B,SAAS8B,gBAAgB,SACjCD,EAAEE,MAAQJ,EACVC,EAAEI,iBAAiBH,GACfI,IAAAA,EAAIjC,SAASkC,eAAenB,EAAGY,GAAH,GAAcQ,OAAO,IAAM,MAAQpB,EAAGY,GAAH,SACnEC,EAAEQ,YAAYH,GACdjB,EAAOoB,YAAYR,GAGvBZ,EAAOqB,UAAW,EAClBC,IAGJ,SAASA,IACDC,IAAAA,EAAIxB,EAAGC,EAAOe,OAClB/B,SAASiB,eAAe,UAAUd,UAAYoC,EAAC,GAC/CvC,SAASiB,eAAe,WAAWd,UAAYoC,EAAC,QAChDvC,SAASiB,eAAe,WAAWd,UAAYoC,EAAC,QAChDvC,SAASiB,eAAe,cAAcd,UAAYoC,EAAC,UACnDvC,SAASiB,eAAe,SAASd,UAAYoC,EAAC,UA/DlDvB,EAAOH,iBAAiB,SAAUyB","file":"js.06cfb4e2.map","sourceRoot":"..","sourcesContent":[null,"var CONFIG = require('./config.json');\r\n\r\nclass PublicWFS {\r\n\t\r\n    static doSoapRequest(xml, callbackSuccess, callbackFailed, ...args) {\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open('POST', CONFIG.PUBLIC_WFS_URL, true);\r\n    \r\n        \r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState != 4) return;\r\n            if (xmlhttp.status == 200) {\r\n                callbackSuccess(xmlhttp.responseXML, ...args)\r\n            } else {\r\n                if (callbackFailed != undefined)\r\n                    callbackFailed(xmlhttp.responseXML, ...args)\r\n                else\r\n                    PublicWFS.showMessage(\"Kommunikationsfehler\", true);\r\n            }\r\n        }\r\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml');\r\n        xmlhttp.send(xml);\r\n    }\r\n    \r\n    static doTransaction(transaction, callbackSuccess, callbackFailed, ...args) {\r\n        var xml = \r\n            '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\r\n            '<wfs:Transaction service=\"WFS\" version=\"1.0.0\"' +\r\n            '\t\txmlns=\"http://xml.novasib.de\"' +\r\n            '\t\txmlns:wfs=\"http://www.opengis.net/wfs\" ' +\r\n            '\t\txmlns:gml=\"http://www.opengis.net/gml\" ' +\r\n            '\t\txmlns:ogc=\"http://www.opengis.net/ogc\" ' +\r\n            '\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\r\n            '\t\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\r\n            '\t\txsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\r\n            transaction +\r\n            '</wfs:Transaction>';\r\n        return PublicWFS.doSoapRequest(xml, this._checkTransacktionSuccess, this._checkTransacktionFailed, \r\n            callbackSuccess, callbackFailed, ...args)\r\n    }\r\n\r\n    static _checkTransacktionSuccess (xml, callbackSuccess, callbackFailed, ...args) {\r\n        if (xml.getElementsByTagName('SUCCESS').length > 0) {\r\n            if (callbackSuccess != undefined)\r\n                callbackSuccess(xml, ...args);\r\n            else\r\n                PublicWFS.showMessage(\"Erfolgreich\");\r\n        } else {\r\n            if (callbackFailed != undefined)\r\n                callbackFailed(xml, ...args);\r\n            else\r\n                PublicWFS.showMessage(\"Konnte nicht gespeichert werden\", true);\r\n        }\r\n    }\r\n\r\n    static _checkTransacktionFailed (xml, callbackSuccess, callbackFailed, ...args) {\r\n        callbackFailed(xml, ...args);\r\n    }\r\n\r\n    static doQuery(klasse, filter, callbackSuccess, callbackFailed, ...args) {\r\n        var xml = '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>' +\r\n            '<wfs:GetFeature xmlns=\"http://xml.novasib.de\" ' +\r\n            'xmlns:wfs=\"http://www.opengis.net/wfs\" ' +\r\n            'xmlns:gml=\"http://www.opengis.net/gml\" ' +\r\n            'xmlns:ogc=\"http://www.opengis.net/ogc\" ' +\r\n            'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\r\n            'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" service=\"WFS\" version=\"1.0.0\" ' +\r\n            'xsi:schemaLocation=\"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\">' +\r\n            '<wfs:Query typeName=\"' + klasse + '\">' +\r\n            filter +\r\n            '</wfs:Query>' +\r\n            '</wfs:GetFeature>';\r\n        return PublicWFS.doSoapRequest(xml, callbackSuccess, callbackFailed, ...args)\r\n    }\r\n    \r\n    static showMessage(text, error) {\r\n        let m = document.createElement('div');\r\n        m.className = 'nachricht';\r\n        m.innerHTML = text;\r\n        document.body.append(m);\r\n\r\n        let ausblenden = function () {\r\n            m.style.display = 'none';\r\n            m.remove();\r\n        }\r\n\r\n        if (error) {\r\n            m.style.backgroundColor = 'rgba(255,100,100,0.8)';\r\n            window.setTimeout(ausblenden, 3000);\r\n        } else {\r\n            m.style.backgroundColor = 'rgba(100, 200,100,0.8)';\r\n            window.setTimeout(ausblenden, 5000);\r\n        }\r\n        m.style.display = 'block';\r\n    }\r\n}\r\n\r\nmodule.exports = PublicWFS;","import '../css/index.css';\r\nimport PublicWFS from './PublicWFS.js';\r\n\r\nwindow.addEventListener('load', loadER());\r\n\r\nvar er = {}\r\nvar select = document.getElementById(\"er_select\")\r\nselect.addEventListener(\"change\", aenderung);\r\n\r\n//?Service=WFS&Request=GetFeature&TypeName=Projekt&Filter=<Filter><PropertyIsEqualTo><PropertyName>status</PropertyName><Literal>1</Literal></PropertyIsEqualTo></Filter>\r\n\r\nfunction loadER() {\r\n    let xml = PublicWFS.doQuery('Projekt',\r\n        '<Filter><And>' +\r\n        '<PropertyIsEqualTo><PropertyName>status</PropertyName>' +\r\n        '<Literal>1</Literal>' +\r\n        '</PropertyIsEqualTo><PropertyIsEqualTo>' +\r\n        '<PropertyName>typ</PropertyName>' +\r\n        '<Literal>D</Literal>' +\r\n        '</PropertyIsEqualTo>' +\r\n        '</And></Filter>',  readER);\r\n}\r\n\r\nfunction readER(xml) {\r\n    console.log(xml)\r\n    let proj = xml.getElementsByTagName(\"Projekt\")\r\n    select.innerHTML = \"\"\r\n\r\n    for (var i = 0; i < proj.length; i++) {\r\n\r\n        let projekt = proj[i].getAttribute(\"fid\")\r\n\r\n        er[projekt] = {}\r\n\r\n        er[projekt]['nr'] = proj[i].getElementsByTagName(\"projekt\")[0].firstChild.data\r\n        let kurzbez = proj[i].getElementsByTagName(\"kurzbez\")\r\n        if (kurzbez.length > 0)\r\n            er[projekt]['kurzbez'] = proj[i].getElementsByTagName(\"kurzbez\")[0].firstChild.data\r\n        else\r\n            er[projekt]['kurzbez'] = \"\"\r\n        let langbez = proj[i].getElementsByTagName(\"langbez\")\r\n        if (langbez.length > 0)\r\n            er[projekt]['langbez'] = proj[i].getElementsByTagName(\"langbez\")[0].firstChild.data\r\n        else\r\n            er[projekt]['langbez'] = \"\"\r\n        er[projekt]['ownerName'] = proj[i].getElementsByTagName(\"ownerName\")[0].firstChild.data\r\n        er[projekt]['anlagedat'] = proj[i].getElementsByTagName(\"anlagedat\")[0].firstChild.data\r\n    }\r\n\r\n\r\n    for (let pid in er) {\r\n        let o = document.createElement('option')\r\n        let v = document.createAttribute(\"value\")\r\n        v.value = pid\r\n        o.setAttributeNode(v);\r\n        let t = document.createTextNode(er[pid]['nr'].substr(11) + \" - \" + er[pid]['kurzbez']);\r\n        o.appendChild(t)\r\n        select.appendChild(o)\r\n    }\r\n    //document.getElementById(\"platzhalter\").remove();\r\n    select.disabled = false\r\n    aenderung()\r\n}\r\n\r\nfunction aenderung() {\r\n    var p = er[select.value]\r\n    document.getElementById(\"nummer\").innerHTML = p['nr']\r\n    document.getElementById(\"kurzbez\").innerHTML = p['kurzbez']\r\n    document.getElementById(\"langbez\").innerHTML = p['langbez']\r\n    document.getElementById(\"bearbeiter\").innerHTML = p['ownerName']\r\n    document.getElementById(\"datum\").innerHTML = p['anlagedat']\r\n}"]}